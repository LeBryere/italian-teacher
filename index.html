<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olasz Nyelvtan√°r App</title>
    <style>
        /* Reset √©s alapok */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        /* Container */
        .app-container {
            max-width: 448px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Utility classes */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .flex-1 { flex: 1; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .justify-between { justify-content: space-between; }
        .justify-around { justify-content: space-around; }
        .justify-end { justify-content: flex-end; }
        .text-center { text-align: center; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .overflow-hidden { overflow: hidden; }
        .overflow-y-auto { overflow-y: auto; }
        .w-full { width: 100%; }
        .h-full { height: 100%; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-x-4 > * + * { margin-left: 1rem; }
        .space-x-3 > * + * { margin-left: 0.75rem; }
        .space-x-6 > * + * { margin-left: 1.5rem; }
        .space-x-2 > * + * { margin-left: 0.5rem; }

        /* Grid */
        .grid { display: grid; }
        .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
        .gap-4 { gap: 1rem; }

        /* Padding/Margin */
        .p-8 { padding: 2rem; }
        .p-6 { padding: 1.5rem; }
        .p-4 { padding: 1rem; }
        .p-3 { padding: 0.75rem; }
        .p-2 { padding: 0.5rem; }
        .px-6 { padding-left: 1.5rem; padding-right: 1.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .px-3 { padding-left: 0.75rem; padding-right: 0.75rem; }
        .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
        .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }
        .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
        .mt-6 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mr-3 { margin-right: 0.75rem; }
        .mr-2 { margin-right: 0.5rem; }
        .-mx-6 { margin-left: -1.5rem; margin-right: -1.5rem; }

        /* Typography */
        .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-xl { font-size: 1.25rem; line-height: 1.75rem; }
        .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .text-xs { font-size: 0.75rem; line-height: 1rem; }
        .font-bold { font-weight: 700; }
        .font-semibold { font-weight: 600; }
        .font-medium { font-weight: 500; }
        .italic { font-style: italic; }
        .leading-relaxed { line-height: 1.625; }

        /* Colors */
        .text-white { color: white; }
        .text-slate-800 { color: #1e293b; }
        .text-slate-700 { color: #334155; }
        .text-slate-600 { color: #475569; }
        .text-slate-500 { color: #64748b; }
        .text-orange-100 { color: #fed7aa; }
        .text-orange-500 { color: #f97316; }
        .text-orange-700 { color: #c2410c; }
        .text-cyan-100 { color: #cffafe; }
        .text-cyan-400 { color: #22d3ee; }
        .text-cyan-500 { color: #06b6d4; }
        .text-cyan-600 { color: #0891b2; }
        .text-purple-500 { color: #a855f7; }
        .text-amber-400 { color: #fbbf24; }
        .text-amber-600 { color: #d97706; }
        .text-red-500 { color: #ef4444; }

        /* Backgrounds */
        .bg-white { background-color: white; }
        .bg-red-50 { background-color: #fef2f2; }
        .bg-cyan-50 { background-color: #ecfeff; }
        .bg-orange-100 { background-color: #fed7aa; }
        .bg-cyan-100 { background-color: #cffafe; }
        .bg-slate-50 { background-color: #f8fafc; }
        .bg-slate-200 { background-color: #e2e8f0; }

        /* Gradients */
        .bg-gradient-header {
            background: linear-gradient(90deg, #f97316 0%, #fb923c 50%, #fbbf24 100%);
        }
        .bg-gradient-cyan {
            background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 100%);
        }
        .bg-gradient-orange {
            background: linear-gradient(90deg, #fb923c 0%, #fbbf24 100%);
        }
        .bg-gradient-stats {
            background: linear-gradient(90deg, #f97316 0%, #fbbf24 100%);
        }
        .bg-white-80 {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
        }
        .bg-white-20 {
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(4px);
        }
        .bg-white-glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(16px);
        }

        /* Rounded corners */
        .rounded-full { border-radius: 9999px; }
        .rounded-2xl { border-radius: 1rem; }
        .rounded-xl { border-radius: 0.75rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .rounded-l-xl { border-top-left-radius: 0.75rem; border-bottom-left-radius: 0.75rem; }
        .rounded-r-xl { border-top-right-radius: 0.75rem; border-bottom-right-radius: 0.75rem; }
        .rounded-t-lg { border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem; }

        /* Shadows */
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }

        /* Borders */
        .border { border: 1px solid #e2e8f0; }
        .border-2 { border: 2px solid #e2e8f0; }
        .border-t { border-top: 1px solid rgba(255, 255, 255, 0.2); }
        .border-b { border-bottom: 1px solid rgba(255, 255, 255, 0.2); }
        .border-white-20 { border: 1px solid rgba(255, 255, 255, 0.2); }
        .border-white-25 { border: 1px solid rgba(255, 255, 255, 0.25); }
        .border-white-30 { border: 1px solid rgba(255, 255, 255, 0.3); }
        .border-cyan-200 { border: 1px solid #a5f3fc; }

        /* Sizes */
        .w-2 { width: 0.5rem; }
        .w-8 { width: 2rem; }
        .w-12 { width: 3rem; }
        .h-2 { height: 0.5rem; }
        .h-3 { height: 0.75rem; }
        .h-32 { height: 8rem; }
        .h-40 { height: 10rem; }
        .max-w-xs { max-width: 20rem; }

        /* Hover effects */
        .btn:hover { transform: scale(1.05); }
        .hover-scale:hover { transform: scale(1.05); }
        .hover-bg:hover { background-color: #f1f5f9; }

        /* Transitions */
        .transition { transition: all 0.2s; }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse { animation: pulse 2s infinite; }

        /* Focus */
        .focus-ring:focus {
            outline: none;
            ring: 2px solid #22d3ee;
            border-color: transparent;
        }

        /* Custom styles */
        .header-gradient {
            background: linear-gradient(90deg, #f97316 0%, #fb923c 50%, #fbbf24 100%);
            position: relative;
        }

        .header-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-primary {
            background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover {
            background: linear-gradient(90deg, #0891b2 0%, #2563eb 100%);
            transform: scale(1.05);
        }

        .btn-mic {
            padding: 1rem;
            border-radius: 50%;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .btn-mic-normal {
            background: linear-gradient(90deg, #fb923c 0%, #fbbf24 100%);
            color: white;
        }

        .btn-mic-recording {
            background: linear-gradient(90deg, #ef4444 0%, #ec4899 100%);
            color: white;
            animation: pulse 2s infinite;
        }

        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            border-radius: 0.75rem;
            transition: all 0.2s;
            background: none;
            border: none;
            cursor: pointer;
            color: #64748b;
        }

        .nav-btn.active {
            color: #22d3ee;
            background-color: #ecfeff;
            transform: scale(1.05);
        }

        .nav-btn:hover {
            color: #334155;
        }

        .message-user {
            background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            max-width: 20rem;
            padding: 0.75rem 1.25rem;
            border-radius: 1rem;
        }

        .message-ai {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            color: #1e293b;
            max-width: 20rem;
            padding: 0.75rem 1.25rem;
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            width: 100%;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 9999px;
            height: 0.75rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 0.75rem;
            border-radius: 9999px;
            transition: all 0.5s;
        }

        .skill-bar {
            width: 100%;
            background-color: #e2e8f0;
            border-radius: 9999px;
            height: 0.75rem;
            overflow: hidden;
        }

        .chart-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 10rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(180deg, #f8fafc 0%, transparent 100%);
            border-radius: 0.75rem;
            padding: 1rem;
        }

        .chart-bar {
            width: 2rem;
            background: linear-gradient(180deg, #06b6d4 0%, #3b82f6 100%);
            border-radius: 0.5rem 0.5rem 0 0;
        }

        .icon {
            width: 1.25rem;
            height: 1.25rem;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
        }

        .icon-nav {
            width: 1.25rem;
            height: 1.25rem;
        }

        .hidden { display: none; }
        .opacity-75 { opacity: 0.75; }

        /* Input styles */
        input[type="text"] {
            flex: 1;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 0.75rem 0 0 0.75rem;
            padding: 0.75rem 1rem;
            color: #1e293b;
        }

        input[type="text"]:focus {
            outline: none;
            ring: 2px solid #22d3ee;
            border-color: transparent;
        }

        input[type="text"]::placeholder {
            color: #94a3b8;
        }

        .send-btn {
            background: linear-gradient(90deg, #06b6d4 0%, #3b82f6 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0 0.75rem 0.75rem 0;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .send-btn:hover {
            background: linear-gradient(90deg, #0891b2 0%, #2563eb 100%);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // Simple React-like functionality
        let currentState = {
            isRecording: false,
            currentScreen: 'home',
            messages: [
                {
                    id: 1,
                    type: 'ai',
                    text: 'Ciao Emma! Come stai oggi? Raccontami della tua giornata.',
                    translation: 'Szia Emma! Hogy vagy ma? Mes√©lj a napodr√≥l.',
                    feedback: null
                }
            ],
            inputText: '',
            userStats: {
                level: 'B1+',
                streak: 12,
                wordsLearned: 847,
                accuracy: 87
            }
        };

        const lessons = [
            { id: 1, title: 'Famiglia e Amici', completed: true, difficulty: 'Medio' },
            { id: 2, title: 'Al Ristorante', completed: true, difficulty: 'Medio' },
            { id: 3, title: 'Fare Shopping', completed: false, difficulty: 'Difficile', current: true },
            { id: 4, title: 'Viaggiare in Italia', completed: false, difficulty: 'Difficile' }
        ];

        const achievements = [
            { icon: 'üáÆüáπ', title: 'Primo Passo', desc: 'Prima lezione completata' },
            { icon: 'üó£Ô∏è', title: 'Chiacchierone', desc: '50 conversazioni' },
            { icon: '‚≠ê', title: 'Stellare', desc: '7 giorni consecutivi' }
        ];

        // Icons as SVG strings
        const icons = {
            home: '<svg class="icon-nav" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>',
            book: '<svg class="icon-nav" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>',
            message: '<svg class="icon-nav" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z"/></svg>',
            stats: '<svg class="icon-nav" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 3v18h18"/><path d="m19 9-5 5-4-4-3 3"/></svg>',
            mic: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="23"/><line x1="8" x2="16" y1="23" y2="23"/></svg>',
            micOff: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><line x1="2" x2="22" y1="2" y2="22"/><path d="M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"/><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M12 19v4"/><path d="M8 23h8"/></svg>',
            send: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></svg>',
            volume: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19 11,5"/><path d="m15.54 8.46a5 5 0 0 1 0 7.07"/></svg>',
            star: '<svg class="icon" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>',
            starOutline: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>',
            award: '<svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="8" r="6"/><path d="M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"/></svg>'
        };

        function setState(newState) {
            currentState = { ...currentState, ...newState };
            render();
        }

        function toggleRecording() {
            setState({ isRecording: !currentState.isRecording });
        }

        function setScreen(screen) {
            setState({ currentScreen: screen });
        }

        function updateInput(value) {
            setState({ inputText: value });
        }

        function sendMessage() {
            if (!currentState.inputText.trim()) return;

            const newMessage = {
                id: currentState.messages.length + 1,
                type: 'user',
                text: currentState.inputText,
                translation: null
            };

            const aiResponse = {
                id: currentState.messages.length + 2,
                type: 'ai',
                text: 'Perfetto! La tua pronuncia √® migliorata molto. Ora proviamo con una frase pi√π complessa...',
                translation: 'T√∂k√©letes! A kiejt√©sed sokat javult. Most pr√≥b√°ljunk egy bonyolultabb mondatot...',
                feedback: {
                    accuracy: 92,
                    fluency: 88
                }
            };

            setState({
                messages: [...currentState.messages, newMessage, aiResponse],
                inputText: ''
            });
        }

        function HomeScreen() {
            return `
                <div class="space-y-6">
                    <!-- Welcome Header -->
                    <div class="header-gradient -mx-6 p-8 text-white relative overflow-hidden">
                        <div class="header-overlay"></div>
                        <div class="relative" style="z-index: 10;">
                            <h1 class="text-3xl font-bold mb-2">Ciao! Benvenuta! üëã</h1>
                            <p class="text-orange-100 text-lg">Pronti per oggi lezione di italiano?</p>
                            <div class="mt-6 flex items-center space-x-6 text-sm">
                                <div class="flex items-center bg-white-20 rounded-full border-white-25 px-3 py-1">
                                    ${icons.starOutline}
                                    <span class="font-semibold ml-2">Livello: ${currentState.userStats.level}</span>
                                </div>
                                <div class="flex items-center bg-white-20 rounded-full  border-white-25 px-3 py-1">
                                    ${icons.award}
                                    <span class="font-semibold ml-2">${currentState.userStats.streak} giorni</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="px-6 space-y-6">
                        <!-- Quick Stats -->
                        <div class="grid grid-cols-3 gap-4">
                            <div class="glass-card rounded-2xl p-4 text-center shadow-lg">
                                <div class="text-2xl font-bold text-orange-500">${currentState.userStats.wordsLearned}</div>
                                <div class="text-sm text-slate-600 font-medium">Parole</div>
                            </div>
                            <div class="glass-card rounded-2xl p-4 text-center shadow-lg">
                                <div class="text-2xl font-bold text-cyan-500">${currentState.userStats.accuracy}%</div>
                                <div class="text-sm text-slate-600 font-medium">Precisione</div>
                            </div>
                            <div class="glass-card rounded-2xl p-4 text-center shadow-lg">
                                <div class="text-2xl font-bold text-purple-500">${currentState.userStats.streak}</div>
                                <div class="text-sm text-slate-600 font-medium">Streak</div>
                            </div>
                        </div>

                        <!-- Today's Lesson -->
                        <div class="glass-card rounded-2xl p-6 shadow-lg">
                            <h2 class="text-xl font-bold mb-4 flex items-center text-slate-800">
                                ${icons.book}
                                <span class="ml-3">Lezione di Oggi</span>
                            </h2>
                            <div class="border border-cyan-200 rounded-xl p-5 bg-cyan-50">
                                <div class="flex justify-between items-start mb-3">
                                    <h3 class="font-bold text-slate-800 text-lg">Fare Shopping</h3>
                                    <span class="text-xs bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-semibold">Difficile</span>
                                </div>
                                <p class="text-slate-600 mb-4">Impara a fare acquisti in Italia</p>
                                <button onclick="setScreen('lessons')" class="btn-primary w-full hover-scale">
                                    Inizia Lezione
                                </button>
                            </div>
                        </div>

                        <!-- Recent Achievements -->
                        <div class="glass-card rounded-2xl p-6 shadow-lg">
                            <h2 class="text-xl font-bold mb-4 text-slate-800">Ultimi Successi</h2>
                            <div class="space-y-3">
                                ${achievements.map(achievement => `
                                    <div class="flex items-center space-x-4 p-4 bg-slate-50 rounded-xl border border-white-30">
                                        <span class="text-3xl">${achievement.icon}</span>
                                        <div>
                                            <div class="font-semibold text-slate-800">${achievement.title}</div>
                                            <div class="text-sm text-slate-600">${achievement.desc}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function ChatScreen() {
            return `
                <div class="flex flex-col h-full">
                    <!-- Chat Header -->
                    <div class="bg-white-glass border-b px-6 py-4 flex items-center space-x-4">
                        <div class="w-12 h-12 bg-gradient-orange rounded-full flex items-center justify-center shadow-lg">
                            <span class="text-white text-lg font-bold">üáÆüáπ</span>
                        </div>
                        <div>
                            <div class="font-bold text-slate-800 text-lg">La Tua Insegnante</div>
                            <div class="text-sm text-cyan-500 flex items-center">
                                <div class="w-2 h-2 bg-cyan-400 rounded-full mr-2 animate-pulse"></div>
                                Online
                            </div>
                        </div>
                    </div>

                    <!-- Messages -->
                    <div class="flex-1 overflow-y-auto p-6 space-y-4" style="background: linear-gradient(180deg, rgba(248, 250, 252, 0.5) 0%, rgba(224, 242, 254, 0.5) 100%);">
                        ${currentState.messages.map(message => `
                            <div class="flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}">
                                <div class="${message.type === 'user' ? 'message-user' : 'message-ai'} shadow-lg">
                                    <p class="text-sm leading-relaxed">${message.text}</p>
                                    ${message.translation ? `<p class="text-xs mt-2 opacity-75 italic font-medium">${message.translation}</p>` : ''}
                                    ${message.type === 'ai' ? `
                                        <div class="flex items-center mt-3 space-x-3">
                                            <button class="p-2 hover-bg rounded-full transition">
                                                ${icons.volume}
                                            </button>
                                            ${message.feedback ? `<span class="text-xs text-cyan-600 bg-cyan-50 px-2 py-1 rounded-full font-semibold">Accuratezza: ${message.feedback.accuracy}%</span>` : ''}
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <!-- Input Area -->
                    <div class="bg-white-glass border-t p-6">
                        <div class="flex items-center space-x-3">
                            <button onclick="toggleRecording()" class="btn-mic ${currentState.isRecording ? 'btn-mic-recording' : 'btn-mic-normal'} hover-scale">
                                ${currentState.isRecording ? icons.micOff : icons.mic}
                            </button>
                            <div class="flex-1 flex">
                                <input type="text" value="${currentState.inputText}" oninput="updateInput(this.value)" placeholder="Scrivi in italiano..." class="focus-ring" onkeypress="if(event.key==='Enter') sendMessage()">
                                <button onclick="sendMessage()" class="send-btn hover-scale">
                                    ${icons.send}
                                </button>
                            </div>
                        </div>
                        ${currentState.isRecording ? `
                            <div class="mt-4 text-center">
                                <div class="inline-flex items-center text-red-500 text-sm font-medium bg-red-50 px-4 py-2 rounded-full">
                                    <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse mr-3"></div>
                                    Registrazione in corso...
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        function LessonsScreen() {
            return `
                <div class="space-y-6">
                    <div class="bg-gradient-cyan -mx-6 p-8 text-white">
                        <h1 class="text-3xl font-bold">Le Tue Lezioni</h1>
                        <p class="text-cyan-100 mt-2">Continua il tuo percorso di apprendimento</p>
                    </div>

                    <div class="px-6 space-y-4">
                        ${lessons.map(lesson => `
                            <div class="border-2 rounded-2xl p-6 transition ${lesson.current
                                ? 'bg-cyan-50 border-cyan-200 shadow-lg'
                                : 'glass-card shadow-lg'}">
                                <div class="flex justify-between items-start mb-3">
                                    <h3 class="font-bold text-lg text-slate-800">${lesson.title}</h3>
                                    <div class="flex items-center space-x-2">
                                        ${lesson.completed ? icons.star : ''}
                                        <span class="text-xs px-3 py-1 rounded-full font-semibold ${lesson.difficulty === 'Medio'
                                            ? 'bg-orange-100 text-orange-700'
                                            : 'bg-red-50 text-red-500'}">
                                            ${lesson.difficulty}
                                        </span>
                                    </div>
                                </div>

                                ${lesson.current ? `
                                    <div class="mt-4">
                                        <div class="progress-bar mb-3">
                                            <div class="progress-fill bg-gradient-cyan" style="width: 65%;"></div>
                                        </div>
                                        <p class="text-sm text-slate-600 mb-4 font-medium">Progresso: 65%</p>
                                        <button onclick="setScreen('chat')" class="btn-primary w-full hover-scale">
                                            Continua
                                        </button>
                                    </div>
                                ` : ''}

                                ${lesson.completed ? `
                                    <div class="mt-3 text-amber-600 text-sm flex items-center font-semibold">
                                        ${icons.star}
                                        <span class="ml-2">Completata!</span>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function StatsScreen() {
            const skills = [
                {skill: 'Pronuncia', level: 87, color: 'linear-gradient(90deg, #fb923c 0%, #fbbf24 100%)'},
                {skill: 'Grammatica', level: 92, color: 'linear-gradient(90deg, #22d3ee 0%, #3b82f6 100%)'},
                {skill: 'Vocabolario', level: 78, color: 'linear-gradient(90deg, #a855f7 0%, #ec4899 100%)'},
                {skill: 'Ascolto', level: 85, color: 'linear-gradient(90deg, #10b981 0%, #14b8a6 100%)'}
            ];

            return `
                <div class="space-y-6">
                    <div class="bg-gradient-stats -mx-6 p-8 text-white">
                        <h1 class="text-3xl font-bold">I Tuoi Progressi</h1>
                        <p class="text-orange-100 mt-2">Analizza i tuoi miglioramenti</p>
                    </div>

                    <div class="px-6 space-y-6">
                        <!-- Weekly Progress -->
                        <div class="glass-card rounded-2xl p-6 shadow-lg">
                            <h2 class="text-xl font-bold mb-6 text-slate-800">Attivit√† Settimanale</h2>
                            <div class="chart-container">
                                ${['L', 'M', 'M', 'G', 'V', 'S', 'D'].map(day => `
                                    <div class="flex flex-col items-center">
                                        <div class="chart-bar" style="height: ${Math.random() * 100 + 30}px;"></div>
                                        <span class="text-sm mt-3 text-slate-600 font-semibold">${day}</span>
                                    </div>
                                `).join('')}
                            </div>
                            <p class="text-sm text-slate-600 bg-cyan-50 rounded-lg p-3 font-medium">
                                Media: 25 min/giorno questa settimana üìà
                            </p>
                        </div>

                        <!-- Skills Breakdown -->
                        <div class="glass-card rounded-2xl p-6 shadow-lg">
                            <h2 class="text-xl font-bold mb-6 text-slate-800">Competenze</h2>
                            <div class="space-y-6">
                                ${skills.map(item => `
                                    <div>
                                        <div class="flex justify-between text-sm mb-2">
                                            <span class="font-semibold text-slate-700">${item.skill}</span>
                                            <span class="font-bold text-slate-800">${item.level}%</span>
                                        </div>
                                        <div class="skill-bar">
                                            <div class="progress-fill" style="width: ${item.level}%; background: ${item.color};"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderScreen() {
            switch(currentState.currentScreen) {
                case 'home': return HomeScreen();
                case 'chat': return ChatScreen();
                case 'lessons': return LessonsScreen();
                case 'stats': return StatsScreen();
                default: return HomeScreen();
            }
        }

        function render() {
            const app = `
                <div class="app-container">
                    <!-- Main Content -->
                    <div class="flex-1 overflow-hidden">
                        ${renderScreen()}
                    </div>

                    <!-- Bottom Navigation -->
                    <div class="bg-white-glass border-t flex justify-around py-3 shadow-lg">
                        ${[
                            { id: 'home', icon: 'home', label: 'Home' },
                            { id: 'lessons', icon: 'book', label: 'Lezioni' },
                            { id: 'chat', icon: 'message', label: 'Chat' },
                            { id: 'stats', icon: 'stats', label: 'Progressi' }
                        ].map(nav => `
                            <button onclick="setScreen('${nav.id}')" class="nav-btn ${currentState.currentScreen === nav.id ? 'active' : ''}">
                                ${icons[nav.icon]}
                                <span class="text-xs mt-1 font-medium">${nav.label}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('root').innerHTML = app;
        }

        // Initial render
        render();
    </script>
</body>
</html>
